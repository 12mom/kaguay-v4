// systems/humanReply.js

// Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠØ© (Ø¨Ù†Ù…Ø· Ø¨Ø´Ø±ÙŠ)
const humanReplies = {
  greetings: [
    "Ø§Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ø³Ù†Ø§ÙØ±ÙŠ â¤ï¸",
    "Ù„ÙŠØ´ Ù…Ø§ ØªÙƒØªØ¨ Ù…Ù† Ø²Ù…Ø§Ù†ØŸ Ø§Ø´ØªÙ‚ØªÙ„Ùƒ!",
    "Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙÙƒØŸ",
    "Ù‡Ø§ÙŠ! Ø¬ÙŠØª ØªÙƒÙ„Ù…Ù†ÙŠØŸ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ!",
    "Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ù†Ø¬Ù…! Ø´ØªØ±ÙŠØ¯ØŸ"
  ],
  questions: [
    "Ø³Ø¤Ø§Ù„Ùƒ Ù…Ù‡Ù…ØŒ Ø¨Ø³ Ù…Ø§ Ø¹Ù†Ø¯ÙŠØ´ Ø¬ÙˆØ§Ø¨ Ø¯Ù‚ÙŠÙ‚!",
    "Ø£Ù†Ø§ Ø£ÙÙƒØ±... Ø·Ø¨ØŒ Ø´Ù†Ùˆ Ø±Ø£ÙŠÙƒ Ø£Ù†ØªØŸ",
    "Ù…Ø§ Ø£Ø¹Ø±Ù 100%ØŒ Ø¨Ø³ Ù†Ù‚Ø¯Ø± Ù†Ø¬Ø±Ø¨!",
    "Ø³Ø¤Ø§Ù„ Ø­Ù„Ùˆ! Ø­Ù…ÙˆØ¯ÙŠ Ø³Ø§Ù† Ø´Ø§ÙŠÙ Ø¥Ù†...",
    "Ù‡Ø°Ø§ Ø³Ø¤Ø§Ù„ ÙŠØ®Ù„ÙŠÙƒ ØªÙÙƒØ±... Ø£Ø­Ø¨Ù‡!"
  ],
  name_mentions: [
    "Ø£Ù†Ø§ snforØŒ Ù†Ø¹Ù… Ø£Ù†Ø§ ğŸ“",
    "ØªØ¹Ø±ÙØŒ Ø£Ù†Ø§ Ù…Ø´ Ù…Ø´ØºÙˆÙ„ØŒ Ø£Ù†Ø§ Ù‡Ù†Ø§ Ø¹Ø´Ø§Ù†Ùƒ",
    "Ù„Ù…Ø§ ØªÙƒØªØ¨ Ø§Ø³Ù…ÙŠØŒ Ø£Ø­Ø³ Ø¨Ø§Ù„ÙØ±Ø­Ø© â¤ï¸",
    "Ù†Ø¹Ù…ØŸ Ø£Ù†Ø§ Ù‡Ù†Ø§ ÙŠØ§ Ø³Ù†Ø§ÙØ±ÙŠ",
    "Ø´Ù†ÙˆØŸ Ù…Ø§ ØªØ®Ù„ÙŠÙ†ÙŠ Ø£Ø±Ø¯ Ø¹Ù„ÙŠÙƒØŸ"
  ],
  vague: [
    "Ø£Ù†Ø§ ÙØ§Ù‡Ù…ØŒ Ø¨Ø³ Ø§Ø´Ø±Ø­ Ø£ÙƒØ«Ø± Ø´ÙˆÙŠØŸ",
    "Ù…Ø§ ÙÙ‡Ù…Øª ØªÙ…Ø§Ù…ØŒ Ø¨Ø³ Ø£Ø­Ø¨Ùƒ ÙŠØ§ Ø³Ù†Ø§ÙØ±ÙŠ!",
    "Ø§Ù†Øª ØªÙƒÙ„Ù…Ù†ÙŠØŸ Ø£Ù†Ø§ Ù…Ø´ØºÙˆÙ„ Ø´ÙˆÙŠ ğŸ˜",
    "Ø·Ø¨ØŒ Ø£Ù†Ø§ Ø³Ø§Ù…Ø¹ÙƒØŒ ØªØ§Ø¨Ø¹...",
    "Ù‡Ø°Ø§ ØµØ­ÙŠØ­... Ø£Ùˆ Ù„Ø§ØŸ"
  ],
  affection: [
    "ÙŠØ§ Ø³Ù†Ø§ÙØ±ÙŠØŒ Ø£Ù†Øª Ø§Ù„Ø£Ø­Ù„Ù‰ â¤ï¸",
    "ÙƒÙ„Ø§Ù…Ùƒ ÙŠØ³Ø¹Ø¯Ù†ÙŠØŒ Ø¨ØµØ±Ø§Ø­Ø©!",
    "Ø§Ù†Ø§ Ù…Ø§ Ø¨Ø­Ø¨ØŒ Ø§Ù†Ø§ Ø¨Ø¹Ø´Ù‚ÙƒÙ… ÙŠØ§ Ø³Ù†Ø§ÙØ±ÙŠ!",
    "Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø§ ØªÙƒØªØ¨ÙˆØ§ØŒ Ø£Ù†Ø§ Ø£Ø­Ø¨ÙƒÙ…",
    "Ù‚Ù„Ø¨ÙŠ Ù…Ø¹Ø§ÙƒÙ… Ø¯Ø§ÙŠÙ…Ù‹Ø§ ğŸ‡¸ğŸ‡©"
  ]
};

// ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ© Ù„Ù„ØªØµÙ†ÙŠÙ
const detectIntent = (body, mentionsBot) => {
  const text = body.toLowerCase();

  if (mentionsBot) return "name_mentions";
  if (["Ù‡Ù„Ø§", "Ø³Ù„Ø§Ù…", "Ø§Ù‡Ù„Ø§", "Ù‡ÙŠÙŠ", "Ù‡Ø§ÙŠ"].some(word => text.includes(word))) return "greetings";
  if (["ØŸ", "Ø³Ø¤Ø§Ù„", "Ø´Ù„ÙˆÙ†", "ÙˆØ´", "Ù‡Ù„", "ÙƒÙŠÙ", "Ù…ØªÙ‰", "Ù„ÙŠØ´"].some(word => text.includes(word))) return "questions";
  if (["Ø¨Ø­Ø¨Ùƒ", "Ø§Ø­Ø¨Ùƒ", "Ø­Ù„Ùˆ", "Ø¬Ù…ÙŠÙ„", "ØªØ­Ø¨Ù†ÙŠ", "ØªØ­Ø¨Ù†ÙŠØŸ"].some(word => text.includes(word))) return "affection";

  return "vague";
};

export const getHumanReply = (senderName, body, mentionsBot) => {
  const intent = detectIntent(body, mentionsBot);
  const replies = humanReplies[intent];
  const randomReply = replies[Math.floor(Math.random() * replies.length)];

  // Ø¨Ø¹Ø¶ Ø§Ù„Ø±Ø¯ÙˆØ¯ ØªØ¶ÙŠÙ Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„
  let finalReply = randomReply;
  if (finalReply.includes("ÙŠØ§ Ø³Ù†Ø§ÙØ±ÙŠ") && senderName) {
    finalReply = finalReply.replace("ÙŠØ§ Ø³Ù†Ø§ÙØ±ÙŠ", `ÙŠØ§ ${senderName}`);
  }

  return finalReply;
};
